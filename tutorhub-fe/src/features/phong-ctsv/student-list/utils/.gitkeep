// import { MainLayout } from 'src/layouts'
// import React, { useState, useMemo, useCallback , useEffect} from 'react';
// import Table, {type Column} from 'src/features/faculty/student-assessment/components/Table';
// import { FiDownload } from "react-icons/fi";
// import { FiSearch } from "react-icons/fi";
// import { CiFilter } from "react-icons/ci";
// import { CiCalendar } from "react-icons/ci";
// import { IoArrowForwardOutline } from "react-icons/io5";

// interface StudentRow {
//   stuId: string;
//   name: string;
//   faculty: string;
//   topic: string;
//   tutor: string;
//   groups: number;
//   sessions: number;
// }

// // Bản đồ ánh xạ Topic theo Faculty
// const FACULTY_TOPIC_MAP: Record<string, string[]> = {
//   'Computer Science and Engineering': ['Data Structures', 'Web Programming', 'Database Systems', 'Network Security'],
//   'Business Administration': ['Financial Accounting', 'Digital Marketing', 'Macroeconomics'],
//   'Foreign Languages': ['Academic English', 'Business Japanese'],
//   'Mechanical Engineering': ['Engineering Drawing', 'Solid Mechanics'],
// };

// const tutorDataa = [
//   { stuId: '123123', name: 'Nguyễn Trọng Nhân', faculty: 'Computer Science and Engineering', topic: 'Web Programming', groups: 1, sessions: 1, tutor: 'Lê Trần Tấn Phát' },
//   { stuId: '123124', name: 'Trần Thị Thuý', faculty: 'Computer Science and Engineering', topic: 'Data Structures', groups: 2, sessions: 2, tutor: 'Lê Trần Tấn Phát' },
//   { stuId: '123125', name: 'Lê Văn Khải', faculty: 'Business Administration', topic: 'Financial Accounting', groups: 3, sessions: 3, tutor: 'Hoàng Giữ Tiên Nhất' },
//   { stuId: '123126', name: 'Phan Anh Dũng', faculty: 'Business Administration', topic: 'Digital Marketing', groups: 4, sessions: 4, tutor: 'Lê Trần Tấn Phát' },
//   { stuId: '123127', name: 'Bùi Thị Lan', faculty: 'Foreign Languages', topic: 'Academic English', groups: 5, sessions: 5, tutor: 'Hoàng Giữ Tiên Nhất' },
//   { stuId: '123128', name: 'Đỗ Minh Tuấn', faculty: 'Mechanical Engineering', topic: 'Engineering Drawing', groups: 6, sessions: 6, tutor: 'Lê Trần Tấn Phát' },
//   { stuId: '123129', name: 'Hoàng Văn Cường', faculty: 'Computer Science and Engineering', topic: 'Network Security', groups: 7, sessions: 7, tutor: 'Hoàng Giữ Tiên Nhất' },
// ];



// // --- MAIN COMPONENT ---
// export const StudentListPage = () => {
//     // States for Filters
//     const [selectedFaculty, setSelectedFaculty] = useState('');
//     const [selectedTopic, setSelectedTopic] = useState('');
//     const [selectedTutor, setSelectedTutor] = useState('');
//     const [dateFrom, setDateFrom] = useState(''); 
//     const [dateTo, setDateTo] = useState('');
    
//     // State for Displayed Data (Initialized to all data)
//     const [filteredData, setFilteredData] = useState<StudentRow[]>(tutorDataa);

//     // State for Modal
//     const [isModalOpen, setIsModalOpen] = useState(false);
//     const [modalContent, setModalContent] = useState<StudentRow | null>(null);

//     // Initial filter run on mount (optional, but ensures table is populated)
//     useEffect(() => {
//         applyFilter(selectedFaculty, selectedTopic, selectedTutor);
//     }, []); // Run once on initial load

//     // Lấy danh sách Faculty và Tutor duy nhất (Không đổi)
//     const uniqueFaculties = useMemo(() => {
//         return [...new Set(tutorDataa.map((item) => item.faculty))].sort();
//     }, []);

//     const uniqueTutors = useMemo(() => {
//         return [...new Set(tutorDataa.map((item) => item.tutor))].sort();
//     }, []);
    
//     // Topics có sẵn dựa trên Faculty được chọn (Không đổi)
//     const availableTopics = useMemo(() => {
//         return selectedFaculty ? FACULTY_TOPIC_MAP[selectedFaculty] || [] : [];
//     }, [selectedFaculty]);

//     // Logic lọc chính (Không đổi)
//     const applyFilter = useCallback((faculty : string , topic : string , tutor : string) => {
//         // Logic lọc ngày tháng được bỏ qua
        
//         const result = tutorDataa.filter((item) => {
//             const facultyMatch = faculty === '' || item.faculty === faculty;
//             const topicMatch = topic === '' || item.topic === topic;
//             const tutorMatch = tutor === '' || item.tutor === tutor;

//             return facultyMatch && topicMatch && tutorMatch;
//         });

//         setFilteredData(result);
//     }, []);

//     // --- CẬP NHẬT: Xử lý thay đổi filter chỉ CẬP NHẬT STATE, KHÔNG LỌC NGAY ---
    
//     // Xử lý khi Faculty thay đổi
//     const handleFacultyChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
//         const newFaculty = e.target.value;
//         setSelectedFaculty(newFaculty);
//         // Nếu thay đổi Faculty, reset Topic để tránh lỗi Topic không tồn tại trong Faculty mới
//         if (newFaculty !== selectedFaculty) {
//              setSelectedTopic(''); 
//         }
//     };
    
//     // Xử lý khi Topic thay đổi
//     const handleTopicChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
//         setSelectedTopic(e.target.value);
//     };
    
//     // Xử lý khi Tutor thay đổi
//     const handleTutorChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
//         setSelectedTutor(e.target.value);
//     };

//     // --- CẬP NHẬT: Xử lý nút Search (chỉ gọi applyFilter ở đây) ---
//     const handleSearch = () => {
//         applyFilter(selectedFaculty, selectedTopic, selectedTutor);
//     };
    
//     // --- CHỨC NĂNG: Xử lý xem chi tiết đánh giá (Assessment Modal) ---
//     const handleViewAssessment = (rowData : StudentRow) => {
//         setModalContent(rowData);
//         setIsModalOpen(true);
//     };

//     const columns : Column<StudentRow>[] = useMemo(() => [
//         { header: 'Stu. ID', accessor: 'stuId', width: '10%' },
//         {
//             header: 'Name',
//             accessor: 'name',
//             width: '20%',
//         },
//         { 
//             header: 'Faculty', 
//             accessor: 'faculty', 
//             width: '20%',
//             render: (row) => (
//                 <span className='font-medium text-indigo-600'>{row.faculty}</span>
//             )
//         },
//         {
//             header: 'Topic',
//             accessor: 'topic',
//             width: '15%',
//             render: (row) => (
//                 <span className='text-sm text-gray-700'>{row.topic}</span>
//             )
//         },
//         {
//             header: 'Groups/Sessions',
//             accessor: 'groups',
//             width: '15%',
//             textAlign: 'center',
//             render: (row) => (
//                 <span className='font-mono text-gray-800'>{row.groups} / {row.sessions}</span>
//             ),
//         },
//         {
//             header: 'View',
//             width: '10%',
//             textAlign: 'center',
//             render: (row) => (
//                 <button
//                     onClick={() => handleViewAssessment(row)} // Sử dụng hàm mở modal
//                     className='flex items-center justify-center mx-auto gap-1 rounded-full bg-cyan-500 px-3 py-1.5 text-white text-sm font-medium shadow-md transition hover:bg-cyan-600 transform hover:scale-105'
//                 >
//                     <IoArrowForwardOutline size={16} />
//                 </button>
//             ),
//         },
//     ], []);

//     return (
//         <MainLayout>
//             <div className='p-4 md:p-8 bg-white shadow-2xl rounded-xl'>
//                 {/* --- KHỐI LỌC: Bố cục 7 cột (5 filter + 2 button) --- */}
//                 <div className='grid grid-cols-2 md:grid-cols-7 gap-3 mb-8 items-end p-4 bg-gray-50 rounded-xl border border-gray-200'>
                    
//                     {/* 1. Dropdown chọn Faculty */}
//                     <div>
//                         <label htmlFor="faculty" className="block text-xs font-medium text-gray-700 mb-1">Faculty</label>
//                         <select
//                             id='faculty'
//                             value={selectedFaculty}
//                             onChange={handleFacultyChange}
//                             className='w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-white transition duration-150'
//                         >
//                             <option value=''>--- All Faculties ---</option>
//                             {uniqueFaculties.map((faculty, index) => (
//                                 <option key={index} value={faculty}>
//                                     {faculty}
//                                 </option>
//                             ))}
//                         </select>
//                     </div>
                    
//                     {/* 2. Dropdown chọn Topic */}
//                     <div>
//                         <label htmlFor="topic" className="block text-xs font-medium text-gray-700 mb-1">Topic</label>
//                         <select
//                             id='topic'
//                             value={selectedTopic}
//                             onChange={handleTopicChange}
//                             disabled={!selectedFaculty && availableTopics.length === 0}
//                             className={`w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-white transition duration-150 ${(!selectedFaculty || availableTopics.length === 0) ? 'bg-gray-200 text-gray-500 cursor-not-allowed' : ''}`}
//                         >
//                             <option value=''>--- All Topics ---</option>
//                             {availableTopics.map((topic, index) => (
//                                 <option key={index} value={topic}>
//                                     {topic}
//                                 </option>
//                             ))}
//                         </select>
//                     </div>

//                     {/* 3. Dropdown chọn Tutor */}
//                     <div>
//                         <label htmlFor="tutor" className="block text-xs font-medium text-gray-700 mb-1">Tutor</label>
//                         <select
//                             id='tutor'
//                             value={selectedTutor}
//                             onChange={handleTutorChange}
//                             className='w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-white transition duration-150'
//                         >
//                             <option value=''>--- All Tutors ---</option>
//                             {uniqueTutors.map((tutor, index) => (
//                                 <option key={index} value={tutor}>
//                                     {tutor}
//                                 </option>
//                             ))}
//                         </select>
//                     </div>

//                     {/* 4. Input From Date (Style only) */}
//                     <div className='relative'>
//                         <label htmlFor="date-from" className="block text-xs font-medium text-gray-700 mb-1">From</label>
//                         <input
//                             type='date'
//                             id='date-from'
//                             value={dateFrom}
//                             onChange={(e) => setDateFrom(e.target.value)}
//                             className='w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 pr-8'
//                             placeholder="dd/mm/yyyy"
//                         />
//                         <CiCalendar size={18} className='absolute right-2 top-7 text-gray-400 pointer-events-none'/>
//                     </div>

//                     {/* 5. Input To Date (Style only) */}
//                     <div className='relative'>
//                         <label htmlFor="date-to" className="block text-xs font-medium text-gray-700 mb-1">To</label>
//                         <input
//                             type='date'
//                             id='date-to'
//                             value={dateTo}
//                             onChange={(e) => setDateTo(e.target.value)}
//                             className='w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 pr-8'
//                             placeholder="dd/mm/yyyy"
//                         />
//                         <CiCalendar size={18} className='absolute right-2 top-7 text-gray-400 pointer-events-none'/>
//                     </div>

//                     {/* 6. Nút Search (Mục tiêu chính) */}
//                     <div className='flex'>
//                         <button
//                             onClick={handleSearch}
//                             className='cursor-pointer flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-700 px-4 py-2.5 text-white font-medium shadow-md transition duration-200 ease-in-out hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2'
//                         >
//                             <FiSearch size={18} />
//                             <span>Search</span>
//                         </button>
//                     </div>

//                     {/* 7. Nút Export */}
//                     <div className='flex'>
//                         <button
//                             onClick={() => console.log("Exporting filtered data to CSV...")}
//                             className='flex w-full items-center justify-center gap-2 rounded-lg bg-green-600 px-4 py-2.5 text-white font-medium shadow-md transition hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2'
//                         >
//                             <FiDownload size={18} />
//                             <span>Export</span>
//                         </button>
//                     </div>
//                 </div>

//                 {/* --- BẢNG DỮ LIỆU --- */}
//                 <div className='mb-4 flex items-center gap-3 text-lg font-semibold text-gray-700'>
//                     <CiFilter size={20} className="text-indigo-500" />
//                     List of Students ({filteredData.length} entries)
//                 </div>
//                 <Table columns={columns} data={filteredData} />
//             </div>
//         </MainLayout>
//     );
// };






// const X = (props: IconProps) => (
//     <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 24} height={props.size || 24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
//         <line x1="18" y1="6" x2="6" y2="18"></line>
//         <line x1="6" y1="6" x2="18" y2="18"></line>
//     </svg>
// );
// interface ModalProps {
//   isOpen: boolean;
//   onClose: () => void;
//   assessmentData: StudentRow | null;
// }
// // --- MODAL COMPONENT (Replaces alert()) ---
// const AssessmentModal: React.FC<ModalProps> = ({ isOpen, onClose, assessmentData }) => {
//     if (!isOpen || !assessmentData) return null;

//     return (
//         <div className="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4" onClick={onClose}>
//             <div 
//                 className="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden transform transition-all duration-300 scale-100"
//                 onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside modal
//             >
//                 <div className="flex justify-between items-center p-5 border-b bg-indigo-50 border-indigo-200">
//                     <h3 className="text-xl font-bold text-indigo-700">Assessment Detail: {assessmentData.name}</h3>
//                     <button onClick={onClose} className="text-gray-400 hover:text-gray-600 transition">
//                         <X size={24} />
//                     </button>
//                 </div>
//                 <div className="p-6 space-y-4">
//                     <p className='text-sm text-gray-600 border-b pb-2 italic'>ID: {assessmentData.stuId}</p>
//                     <div className="grid grid-cols-2 gap-4">
//                         <div className='flex flex-col'>
//                             <span className="text-xs font-semibold uppercase text-gray-500">Faculty</span>
//                             <span className="text-base font-medium text-indigo-600">{assessmentData.faculty}</span>
//                         </div>
//                         <div className='flex flex-col'>
//                             <span className="text-xs font-semibold uppercase text-gray-500">Tutor</span>
//                             <span className="text-base font-medium text-gray-800">{assessmentData.tutor}</span>
//                         </div>
//                         <div className='flex flex-col'>
//                             <span className="text-xs font-semibold uppercase text-gray-500">Topic</span>
//                             <span className="text-base font-medium text-gray-800">{assessmentData.topic}</span>
//                         </div>
//                         <div className='flex flex-col'>
//                             <span className="text-xs font-semibold uppercase text-gray-500">Groups / Sessions</span>
//                             <span className="text-base font-medium text-gray-800">{assessmentData.groups} Groups / {assessmentData.sessions} Sessions</span>
//                         </div>
//                     </div>
//                     <div className='pt-4 border-t'>
//                          <h4 className="text-base font-bold text-gray-700 mb-2">Mock Feedback Summary</h4>
//                          <p className="p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800 italic">
//                             "Student shows strong grasp in {assessmentData.topic} fundamentals. Needs more practice in advanced problem-solving techniques taught by {assessmentData.tutor} in Student Assessment."
//                          </p>
//                     </div>
//                 </div>
//                 <div className="p-5 border-t flex justify-end">
//                     <button 
//                         onClick={onClose} 
//                         className="rounded-lg bg-indigo-600 px-4 py-2 text-white font-medium shadow-md transition hover:bg-indigo-700"
//                     >
//                         Close
//                     </button>
//                 </div>
//             </div>
//         </div>
//     );
// };

            {/* Assessment Modal */}
            {/* <AssessmentModal 
                isOpen={isModalOpen} 
                onClose={() => setIsModalOpen(false)} 
                assessmentData={modalContent}
            /> */}